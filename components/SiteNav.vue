<template>
  <div>
    <button
      class="text-caps tracking-widest uppercase semibold relative z-20"
      :class="{ 'text-neutral-100': isOpen, 's-open': !isOpen }"
      ref="menuButton"
      @click="toggleMenu"
      :aria-expanded="isOpen"
      aria-haspopup="menu"
    >
      {{ isOpen ? "Close" : "Menu" }}
    </button>
    <nav
    class="site-nav | bg-neutral-950 text-neutral-100 antialiased | py-24"
      ref="menu"
      :aria-hidden="!isOpen"
      v-if="isOpen"
      role="menu"
      @keydown.escape="closeMenu"
    >
      <h2 class="text-xs uppercase tracking-widest font-body | flex flex-col items-center">
        <span class="text-caps tracking-widest uppercase semibold">Menu</span>
        <span class="block w-px h-8 bg-neutral-100 mx-auto mt-4"></span>
      </h2>
      <ul class="flex flex-wrap flex-row justify-center items-center h-full max-w-screen-xl px-4 mx-auto">
        <li class="basis-6/12 | md:basis-4/12">
          <ul class="flex flex-col gap-4 items-center | md:gap-8">
            <li>
              <span class="text-caps uppercase tracking-widest">Services</span>
              <span class="block w-px h-6 bg-neutral-100 mx-auto mt-4"></span>
            </li>
            <li>
              <NuxtLink @click="toggleMenu" to="/services/hair" class="block font-header text-nav-header">Hair</NuxtLink>
            </li>
            <li>
              <NuxtLink @click="toggleMenu" to="/services/bridal" class="block font-header text-nav-header">Bridal</NuxtLink>
            </li>
            <li>
              <NuxtLink @click="toggleMenu" to="/services/beauty" class="block font-header text-nav-header">Beauty</NuxtLink>
            </li>            
          </ul>
        </li>
        <li class="basis-4/12 | hidden flex-col gap-8 items-center | md:flex">
            <NuxtLink @click="toggleMenu" to="/book" class="block w-full" style="max-width: clamp(4rem, 2.182rem + 9.09vw, 9rem);" aria-label="Book Now">
              <svg class="motion-safe:hover:animate-spin-slow" fill="currentColor" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 125 125">
                    <path d="M56.6649 115.303c.3211.179.5911.302.81.369.2087.075.4153.122.6198.14.2603.024.5416-.03.8441-.162s.5759-.304.82-.516l-.0987 1.088c-.245.221-.5124.38-.8022.475-.2907.105-.6034.142-.938.112-.2695-.025-.5319-.077-.7871-.156-.2645-.08-.6021-.233-1.0128-.458-.3211-.179-.5861-.306-.7948-.381-.2189-.067-.4259-.109-.6211-.127-.2695-.024-.5556.03-.8581.162-.3025.131-.5758.303-.82.516l.0975-1.074c.245-.222.5128-.385.8035-.489.2907-.105.6033-.142.9379-.112.2603.024.5273.076.8011.157.2637.089.5966.242.9989.456Zm-11.8963-7.306-3.4306-1.449c-1.6894-.713-3.0658-.261-3.6487 1.119-.4521 1.07-.1456 2.035.5823 2.723-.8048.07-1.5137.561-1.846 1.348-.5066 1.199.1364 2.519 1.5034 3.097l3.3532 1.416 3.4864-8.254Zm-3.6609-.148 1.6508.697-1.0732 2.541-1.7281-.73c-.8254-.349-1.1397-1.044-.8074-1.83.354-.839 1.0164-1.076 1.9579-.678Zm-1.4731 3.74 1.5605.659-.9207 2.179-1.5605-.659c-.6964-.294-.968-.91-.6847-1.581.2778-.658.9089-.893 1.6054-.598Zm-6.3705-10.066c-2.2281-1.5282-4.9739-.916-6.4628 1.254-1.4968 2.182-1.0715 4.953 1.1566 6.481 2.2281 1.529 4.966.928 6.4628-1.254 1.4889-2.17 1.0715-4.952-1.1566-6.481Zm-.8078 1.178c1.42.974 1.6842 2.717.5675 4.345-1.1166 1.628-2.8381 2.009-4.2581 1.035s-1.6842-2.718-.5675-4.345c1.1166-1.628 2.8381-2.009 4.2581-1.035Zm-6.941-8.2296c-1.8506-1.9688-4.6638-1.9568-6.5816-.1541-1.9279 1.8123-2.1036 4.6097-.253 6.5787 1.8506 1.969 4.6536 1.966 6.5816.154 1.9177-1.8028 2.1036-4.6098.253-6.5786Zm-1.0405.978c1.1794 1.2547 1.0655 3.0142-.3728 4.3662-1.4383 1.3524-3.2014 1.3564-4.3808.1021-1.1794-1.2547-1.0656-3.0141.3728-4.3661 1.4383-1.352 3.2014-1.3569 4.3808-.1022Zm-3.1052-5.9375-.8507-1.3997-2.6799 1.6288-1.4259-.3784 1.9461-4.8036-1.0325-1.6988-2.4529 6.0454-5.12378-1.2601.99618 1.639 5.6213 1.3509-3.5053 2.1305.8508 1.3997 7.6566-4.6537Zm-6.5901-14.3115-.3632-1.5972-6.21145 1.4122 5.29895-5.4258-.3724-1.6382-8.73707 1.9865.36314 1.5972 6.22513-1.4153-5.3095 5.4425.36935 1.6246 8.73705-1.9865ZM13.2462 61.405c-.0411-2.7017-2.1281-4.5881-4.75981-4.548-2.64569.0403-4.66025 1.9892-4.61911 4.6908.04113 2.7017 2.1141 4.5884 4.75979 4.5481 2.63173-.0401 4.66023-1.9892 4.61913-4.6909Zm-1.4278.0218c.0262 1.7218-1.2433 2.9452-3.21712 2.9753-1.97377.0301-3.27995-1.1542-3.30617-2.876-.02622-1.7218 1.2433-2.9453 3.21708-2.9753 1.97381-.0301 3.27991 1.1542 3.30621 2.876Zm1.9946-8.198.4123-1.7871-6.12956-3.5116 7.03586-.4172.4059-1.7598-8.1171-4.6741-.343 1.4869 6.4464 3.5704-7.35584.3721-.3965 1.7188 6.44754 3.6281-7.35697.3144-.37447 1.6234 9.32544-.5643Zm3.7103-20.7239c-.3083.2004-.543.3818-.7042.5442-.1639.1495-.3018.3104-.4137.4825-.1424.2192-.2258.4933-.2504.8224-.0246.329-.0001.651.0735.966l-.9157-.5949c-.0814-.3201-.0967-.6306-.0459-.9315.043-.3059.156-.5998.339-.8816.1475-.2269.3159-.4347.5052-.6234.1945-.1964.4869-.4238.8773-.6821.3083-.2004.5444-.3754.7083-.5249.1612-.1624.2952-.3258.402-.4901.1474-.227.2334-.505.258-.8341.0246-.329.0001-.6511-.0735-.966l.9039.5873c.0815.32.1007.6331.0577.939-.0429.306-.156.5999-.339.8816-.1424.2192-.3133.4309-.5129.6352-.2022.1914-.4921.4148-.8696.6704Zm12.0143-7.1102 2.8828-2.3575c1.4197-1.161 1.6624-2.5893.7141-3.7489-.7356-.8995-1.7324-1.079-2.6801-.7562.3134-.7446.2102-1.6006-.3304-2.2617-.8242-1.0079-2.2919-1.0555-3.4407-.1161l-2.8178 2.3043 5.6721 6.9361Zm1.8399-3.1685-1.3873 1.1345-1.7459-2.135 1.4522-1.1876c.6936-.5672 1.4551-.5208 1.9957.1403.5761.7045.4764 1.4009-.3147 2.0478Zm-2.6195-3.0483-1.3113 1.0724-1.4978-1.8316 1.3113-1.0723c.5852-.4786 1.257-.4312 1.7179.1324.452.5527.3651 1.2205-.2201 1.6991Zm11.8749-.9356c2.3918-1.257 3.1322-3.971 1.9078-6.3009-1.2309-2.34224-3.8796-3.25932-6.2714-2.00232-2.3919 1.25702-3.1388 3.95862-1.9078 6.30082 1.2244 2.3299 3.8796 3.2594 6.2714 2.0024Zm-.6643-1.2641c-1.5243.8011-3.1893.2211-4.1076-1.5263-.9183-1.7474-.4517-3.4477 1.0726-4.2488 1.5243-.801 3.1893-.221 4.1076 1.5264.9183 1.7474.4517 3.4476-1.0726 4.2487Zm10.5179-2.2971c2.6049-.7176 3.9075-3.2111 3.2084-5.74859-.7027-2.55097-3.0947-4.01216-5.6997-3.29453-2.6049.71762-3.9112 3.19762-3.2084 5.74862.699 2.5374 3.0947 4.0121 5.6997 3.2945Zm-.3793-1.3767c-1.6601.4573-3.163-.4646-3.6873-2.3677-.5242-1.90315.2944-3.46466 1.9546-3.92201 1.6602-.45735 3.163.46462 3.6873 2.36773.5243 1.90308-.2944 3.46458-1.9546 3.92198Zm6.7004.0256 1.635-.099-.1896-3.1303 1.0003-1.08442 3.3397 3.96342 1.9843-.1202-4.2013-4.99118 3.506-3.94314-1.9145.11594-3.8186 4.34076-.2479-4.0945-1.635.09901.5416 8.94361Zm15.7328.8522 1.5821.4244 1.6505-6.15248 2.3249 7.21898 1.6226.4353 2.3216-8.65405-1.582-.42442-1.6542 6.16597-2.3348-7.23608-1.6091-.43167-2.3216 8.65405Zm12.9161 5.0836c2.4085 1.2247 5.051.2596 6.244-2.0865 1.1993-2.3585.4162-5.0499-1.9923-6.2746-2.4085-1.22474-5.0447-.2721-6.244 2.0864-1.193 2.3461-.4162 5.0499 1.9923 6.2747Zm.6473-1.2729c-1.535-.7805-2.0244-2.4744-1.1296-4.2339.8947-1.7596 2.5517-2.362 4.0867-1.5814 1.5349.7805 2.0243 2.4743 1.1296 4.2339-.8948 1.7596-2.5518 2.3619-4.0867 1.5814Zm6.3189 5.5908 1.388 1.1988 5.9668-3.7816-2.9153 6.417 1.3668 1.1804 7.923-4.9967-1.155-.9974-6.1669 4.0344 3.1049-6.679-1.335-1.153-6.2185 4.0085 3.156-6.653-1.2608-1.089-3.854 8.5106Zm16.5953 12.9548c-.033-.3662-.084-.6584-.152-.8768-.056-.2147-.134-.4118-.234-.5911-.127-.2282-.331-.43-.61-.6053-.28-.1753-.576-.304-.889-.3859l.954-.5321c.321.0774.602.2088.845.3941.25.1809.457.418.621.7114.132.2364.237.4823.316.7378.083.2636.147.6284.193 1.0943.034.3662.078.6566.134.8714.068.2183.15.4131.246.5842.132.2364.337.4422.617.6176.279.1753.576.3039.889.3859l-.942.5252c-.321-.0773-.607-.2064-.857-.3873-.251-.1808-.458-.4179-.622-.7113-.127-.2282-.234-.4782-.322-.75-.075-.2682-.137-.6289-.187-1.0821Zm.68 13.9441.739 3.6499c.364 1.7975 1.514 2.6788 2.983 2.3814 1.138-.2306 1.762-1.0284 1.919-2.0172.512.6248 1.318.9331 2.155.7636 1.276-.2585 2.003-1.5342 1.708-2.9887l-.722-3.5676-8.782 1.7786Zm1.943 3.1061-.355-1.7564 2.703-.5474.372 1.8386c.178.8782-.218 1.5299-1.055 1.6994-.892.1807-1.462-.2326-1.665-1.2342Zm3.919-.8936-.336-1.6603 2.319-.4697.336 1.6603c.15.741-.206 1.3129-.919 1.4574-.7.1418-1.25-.2468-1.4-.9877Zm-4.716 10.9385c-.004 2.702 2.05 4.6237 4.682 4.6283 2.646.0048 4.694-1.9096 4.698-4.6116.005-2.702-2.035-4.6236-4.681-4.6283-2.632-.0047-4.694 1.9096-4.699 4.6116Zm1.428.0025c.004-1.722 1.294-2.9237 3.268-2.9201 1.974.0035 3.259 1.2098 3.256 2.9318-.003 1.722-1.293 2.9237-3.267 2.9202-1.974-.0036-3.26-1.2099-3.257-2.9319ZM109.394 74.01c-.581 2.6387 1.016 4.9546 3.586 5.5208 2.584.5693 4.993-.864 5.575-3.5028.581-2.6387-1.003-4.9515-3.587-5.5208-2.57-.5662-4.992.8641-5.574 3.5028Zm1.395.3072c.37-1.6817 1.887-2.5804 3.815-2.1557 1.928.4247 2.926 1.8776 2.556 3.5593-.371 1.6817-1.887 2.5804-3.815 2.1557-1.928-.4247-2.927-1.8776-2.556-3.5593Zm-3.15 5.9138-.676 1.4922 2.857 1.2935.492 1.3908-5.064 1.1035-.82 1.811 6.375-1.3858 1.851 4.9413.791-1.7473-2.057-5.4032 3.737 1.6919.676-1.4921-8.162-3.6958Zm-8.098 13.5158-1.1139 1.201 4.6709 4.3316-7.4697-1.3136-1.1424 1.2318 6.5701 6.0924 1.113-1.201-4.6805-4.3408 7.4895 1.3128 1.133-1.2215-6.57-6.0927Zm-10.5249 9.0492c-2.2074 1.559-2.5874 4.346-1.0694 6.496 1.526 2.162 4.2717 2.726 6.4791 1.167 2.2073-1.558 2.5954-4.334 1.0694-6.496-1.5179-2.15-4.2717-2.725-6.4791-1.167Zm.8236 1.167c1.4067-.993 3.1332-.635 4.2716.977 1.1385 1.613.8977 3.36-.5091 4.353-1.4068.993-3.1332.635-4.2716-.978-1.1385-1.612-.8977-3.359.5091-4.352Zm-7.8939 2.979-1.708.668.5591 7.042-4.3142-5.574-1.682.658.7207 9.339 1.4212-.556-.6894-7.337 4.4576 5.863 1.6428-.642-.6424-7.37 4.4105 5.896 1.5516-.606-5.7275-7.381Z"/>
                  </svg>   
            </NuxtLink>
        </li>
        <li class="basis-6/12 | md:basis-4/12">
          <ul class="flex flex-col gap-4 items-center | md:gap-8">
            <li>
                <span class="text-caps uppercase tracking-widest">Info</span>
                <span class="block w-px h-6 bg-neutral-100 mx-auto mt-4"></span>
            </li>
            <li>
              <NuxtLink @click="toggleMenu" to="/faqs" class="block font-header text-nav-header">FAQs</NuxtLink>
            </li>
            <li>
              <NuxtLink @click="toggleMenu" to="/journal" class="block font-header text-nav-header">Journal</NuxtLink>
            </li>
            <li>
              <NuxtLink @click="toggleMenu" to="/about-us" class="block font-header text-nav-header">About Us</NuxtLink>
            </li>
          </ul>
        </li>
        <li class="basis-12/12 | flex flex-col items-center">
            <span class="text-caps uppercase tracking-widest">
                <span>Get in touch</span>
                <span class="block w-px h-8 bg-neutral-100 mx-auto mt-4"></span>
            </span>
            <NuxtLink @click="toggleMenu" to="/contact-us" class="block font-header text-nav-header">Contact Us</NuxtLink>
        </li>
      </ul>
    </nav>
  </div>
</template>

<script>
export default {
  name: "SiteNav",
  data() {
    return {
      isOpen: false,
    };
  },
  methods: {
    toggleMenu() {
      this.isOpen = !this.isOpen;
      if (this.isOpen) {
        this.$nextTick(() => {
          this.$refs.menu.querySelector("a").focus(); // Focus on the first link when opening
        });
      } else {
        this.$refs.menuButton.focus(); // Focus back on the button when closing
      }
    },
    closeMenu() {
      this.isOpen = false;
      this.$refs.menuButton.focus(); // Focus back on the button when closing
    },
  },
};
</script>

<style lang="scss" scoped>
.site-nav {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    z-index: 10;
    height: 100vh;
    height: 100svh;
    width: 100%;
    background-color: var(--primary-secondary);
    color: white;

    a {
        transition: color 0.2s ease-in-out;
        /* Hover effect to make hovered <a> tags white */
        &:hover {
            color:  var(--primary-bg); /* Hovered links stay white */
        }

        /* Make other <a> tags greyed out */
        &:not(:hover):not(:focus) {
            color: white;
        }        
    }
}
</style>
